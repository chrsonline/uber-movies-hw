{"version":3,"sources":["Application.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["'use strict';\n\njQuery(document).ready(function () {\n    var map;\n\n    var options = {\n        zoom: 7,\n        center:  new google.maps.LatLng(45.50867, -73.553992),\n        mapTypeId: google.maps.MapTypeId.ROADMAP,\n        disableDefaultUI: true\n    };\n\n    map = new google.maps.Map($('#map')[0], options);\n\n    var app = {};\n\n    app.Suggestion = Backbone.Model.extend({\n      defaults: {\n        term: 'aa',\n        type: 'ss',\n        selected: false\n      }\n    });\n\n    app.SuggestionView = Backbone.View.extend({\n      tagName: 'li',\n      className: 'suggestionBox',\n      template: _.template('<%- term %>'),\n      initialize: function() {\n        this.model.on('change', this.render, this);\n        this.model.on('destroy', this.remove, this);\n        this.model.on('change:selected', this.setSelected, this);\n      },\n      setSelected: function() {\n        console.log(\"set selected was called\");\n        console.log(this.$el);\n        this.$el.toggleClass('suggestionBoxSelected', this.model.get('selected'));\n      },\n      render: function() {\n        this.$el.html(this.template(this.model.toJSON()));\n        return this;\n      }\n    });\n\n    app.Suggestions = Backbone.Collection.extend({\n      initialize: function() {\n        this.selected = null;\n      },\n      startNav: function() {\n      },\n      navigateUp: function() {\n        var index = this.indexOf(this.selected);\n        if(index > 0) {\n            this.setSelected(this.at(index - 1));\n        }\n      },\n      navigateDown: function() {\n        console.log(\"Selected set to \");\n        console.log(this.selected);\n        if(this.length > 0 && this.selected == null) {\n            console.log(\"Setting selection to 0\");\n            this.setSelected(this.at(0));\n        } else {\n          console.log(\"Navigating Down\");\n          var index = this.indexOf(this.selected);\n          if(index < this.length - 1) {\n              this.setSelected(this.at(index + 1));\n          }\n        }\n      },\n      setSelected: function(suggestion) {\n        if(this.selected != null) {\n          this.selected.set({ selected: false });\n        }\n        suggestion.set({ selected: true });\n        this.selected = suggestion;\n        console.log(\"Selected set to \");\n        console.log(this.selected);\n      },\n      url: function () {\n        return '/search/autocomplete?query=' + $('#search-term').val();\n      },\n      parse: function(data) {\n        return data.suggestions;\n      },\n      model: app.Suggestion\n    });\n\n    app.AutocompleteView = Backbone.View.extend({\n      el: '#search',\n      initialize: function() {\n          this.suggestions = new app.Suggestions();\n          this.suggestions.on('reset', this.addAll, this );\n      },\n      events: {\n          \"change input\": \"updateItems\",\n          \"input #search-term\": \"updateItems\",\n          'keyup :input': 'handleKeyPress',\n          'keypress :input': 'handleKeyPress'\n      },\n      handleKeyPress: function(e) {\n        var code = (e.keyCode ? e.keyCode : e.which);\n        if (code == 40) {\n            this.suggestions.navigateDown();\n        }\n        if (code == 38) {\n            this.suggestions.navigateUp();\n        }\n        if (code == 13) {\n\n        }\n      },\n      navigate: function() {\n          if(this.suggestions.selected == null) {\n             this.suggestions.startNav()\n          }\n      },\n      updateItems: function () {\n          this.suggestions.fetch();\n      },\n      addOne: function(suggestion) {\n        var view = new app.SuggestionView({model: suggestion});\n        this.$el.find('ul').append(view.render().el);\n      },\n      addAll: function () {\n        this.$el.find('ul').empty();\n        this.suggestions.each( $.proxy( this.addOne, this ) );\n      },\n      render: function (suggestions) {\n\n      }\n    });\n\n    app.SearchResult = Backbone.Model.extend({\n\n    });\n\n    app.SearchResults = Backbone.Collection.extend({\n        // Add a single popover for the selected element\n    });\n\n    app.SearchResultView = Backbone.View.extend({\n\n    });\n\n    app.autocompleteView = new app.AutocompleteView();\n    $('#search-term').keydown(function(e) {\n      var code = (e.keyCode ? e.keyCode : e.which);\n      if (code == 40) {\n          // Set suggestions view to navigation mode\n          app.autocompleteView.navigate();\n      }\n      if (code == 13) {\n            // request selections\n            // also have a little search button to be pressed\n            // Display the current search term - no results if nothing\n            // Display aggregate information in panel overlayed on the left side\n            // Clear current search results if necessary\n            // Kick off searchresults collection with call of type/term\n      }\n\n    });\n});\n"],"sourceRoot":"/source/"}